<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/DeviceMobile/Mobile.master" CodeBehind="entrada.aspx.cs" Inherits="Doctos_eje2.DeviceMobile.entrada" %>

<%@ Register assembly="DevExpress.Web.ASPxScheduler.v17.1, Version=17.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" namespace="DevExpress.Web.ASPxScheduler" tagprefix="dxwschs" %>
<%@ Register assembly="DevExpress.XtraScheduler.v17.1.Core, Version=17.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" namespace="DevExpress.XtraScheduler" tagprefix="cc1" %>

<asp:Content ID="Content" ContentPlaceHolderID="MainContent" runat="server">

        <style type="text/css" media="screen">
            .Titulo{
            width:100%;
            text-align:left;            
            }

            .Entrada_p1{
            /*    text-align:center;
            width:200px;
            padding-right:40px;
            background-color:#95C3F0;
            text-align:left;                        
            float:left;*/
            }

        </style>

        <div id="id_Entrada_p1" style="text-align:center; margin:0 auto; width:100%">
            <dx:ASPxRoundPanel ID="ASPxRoundPanel1" runat="server" HeaderText="COMPRAS" ShowCollapseButton="true" Theme="Moderno" ForeColor="#336600" HorizontalAlign="Center" Width="100%" >
                <PanelCollection>
                    <dx:PanelContent runat="server">
                        <dx:ASPxGridView ID="ASPxGridView1" Width="100%" runat="server" KeyFieldName="index" AutoGenerateColumns="False" DataSourceID="SqlDataSourceMovtosDet" EnableTheming="True" Theme="Youthful" OnFocusedRowChanged="ASPxGridView1_FocusedRowChanged">
                            <ClientSideEvents RowClick="function(s, e) {	
}" SelectionChanged="function(s, e) {
}" />
                            <SettingsAdaptivity AdaptivityMode="HideDataCells" HideDataCellsAtWindowInnerWidth="360">
                                <AdaptiveDetailLayoutProperties ColCount="2">
                                    <Items>
                                        <dx:GridViewColumnLayoutItem ColumnName="fecha">
                                            <CaptionSettings Location="Top" />
                                        </dx:GridViewColumnLayoutItem>
                                        <dx:GridViewColumnLayoutItem ColumnName="folio">
                                            <CaptionSettings Location="Top" />
                                        </dx:GridViewColumnLayoutItem>
                                        <dx:GridViewColumnLayoutItem ColSpan="2" ColumnName="proveedor">
                                            <CaptionSettings Location="Top" />
                                        </dx:GridViewColumnLayoutItem>
                                        <dx:GridViewColumnLayoutItem ColSpan="2" ColumnName="producto">
                                            <CaptionSettings Location="Top" />
                                        </dx:GridViewColumnLayoutItem>
                                        <dx:GridViewColumnLayoutItem ColumnName="cantidad">
                                            <CaptionSettings Location="Top" />
                                        </dx:GridViewColumnLayoutItem>
                                    </Items>
                                    <SettingsAdaptivity AdaptivityMode="SingleColumnWindowLimit" SwitchToSingleColumnAtWindowInnerWidth="375" />
                                </AdaptiveDetailLayoutProperties>
                            </SettingsAdaptivity>
                            <SettingsPager PageSize="20" Mode="EndlessPaging">
                            </SettingsPager>
                            <Settings ShowFilterRow="True" VerticalScrollableHeight="350" VerticalScrollBarMode="Auto" />
                            <SettingsBehavior AllowFocusedRow="True" ProcessFocusedRowChangedOnServer="True" />
                            <Columns>
                                <dx:GridViewDataTextColumn FieldName="folio" ShowInCustomizationForm="True" VisibleIndex="4" Caption="Folio">
                                    <Settings AllowSort="False" />
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataDateColumn FieldName="fecha" ShowInCustomizationForm="True" VisibleIndex="0" Caption="Fecha">
                                    <PropertiesDateEdit DisplayFormatString="dd/MMM/yy">
                                    </PropertiesDateEdit>
                                    <Settings AllowSort="False" />
                                    <SettingsHeaderFilter Mode="DateRangePicker">
                                        <DateRangeCalendarSettings EnableMultiSelect="False" EnableYearNavigation="False" FirstDayOfWeek="Monday" />
                                        <DateRangePickerSettings DisplayFormatString="dd/MMM/yy" EditFormatString="dd/MM/yy" />
                                    </SettingsHeaderFilter>
                                </dx:GridViewDataDateColumn>
                                <dx:GridViewDataTextColumn FieldName="proveedor" ShowInCustomizationForm="True" VisibleIndex="1" Caption="Proveedor">
                                    <Settings AllowSort="False" />
                                    <EditCellStyle Wrap="False">
                                    </EditCellStyle>
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataTextColumn FieldName="cantidad" ShowInCustomizationForm="True" VisibleIndex="2" Caption="Cantidad">
                                    <Settings AllowSort="False" />
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataTextColumn FieldName="producto" ShowInCustomizationForm="True" VisibleIndex="3" Caption="Producto">
                                    <Settings AllowSort="False" />
                                    <EditCellStyle Wrap="False">
                                    </EditCellStyle>
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataTextColumn FieldName="index" ReadOnly="True" ShowInCustomizationForm="True" VisibleIndex="5" Visible="False" Caption="Index de tabla Movimiento">
                                    <Settings AllowSort="False" />
                                    <EditFormSettings Visible="False" />
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataTextColumn Caption="Index Proveedor" FieldName="NumProveedor" ShowInCustomizationForm="True" Visible="False" VisibleIndex="6">
                                </dx:GridViewDataTextColumn>
                                <dx:GridViewDataTextColumn Caption="Index Producto" FieldName="NumProducto" ShowInCustomizationForm="True" Visible="False" VisibleIndex="7">
                                </dx:GridViewDataTextColumn>
                            </Columns>
                        </dx:ASPxGridView>
                        <asp:SqlDataSource ID="SqlDataSourceMovtosDet" runat="server" ConnectionString="<%$ ConnectionStrings:DefaultConnection %>" SelectCommand="SELECT Compras.folio, Compras.fecha, Compras.proveedor, Movimientos.cantidad, Movimientos.producto, Movimientos.[index],Proveedores.[index] as NumProveedor,Productos.[index] as NumProducto 
FROM Compras INNER JOIN Movimientos ON Compras.folio = Movimientos.folio 
INNER JOIN Proveedores ON Compras.proveedor = Proveedores.proveedor
INNER JOIN Productos ON Movimientos.producto = Productos.producto
WHERE (Movimientos.tm = 'COMPRA') ORDER BY fecha,folio DESC"></asp:SqlDataSource>
                    </dx:PanelContent>
                </PanelCollection>
            </dx:ASPxRoundPanel>
        </div>

        <div style="float:left; text-align:center; padding-top:10px;">            
            <dx:ASPxHyperLink ID="ASPxHyperLink1" runat="server" ImageUrl="~/Images/entrada.png" Text="Escanear productos" NavigateUrl="~/DeviceMobile/entrada_detalle.aspx" Theme="Youthful">
            </dx:ASPxHyperLink>
            <br />
            <dx:ASPxLabel ID="ASPxLabel1" runat="server" Text="Captura">
            </dx:ASPxLabel>
        </div>

        <div style="float:left; text-align:center; padding-top:10px; padding-left:10px;">
            <dx:ASPxHyperLink ID="ASPxHyperLink2" runat="server" ImageUrl="~/Images/regresar.png" Text="Salir" NavigateUrl="~/DeviceMobile/Inicio_mobile.aspx" Theme="Youthful">
            </dx:ASPxHyperLink>
            <br />
            <dx:ASPxLabel ID="ASPxLabel2"  runat="server" Text="Salir">
            </dx:ASPxLabel>
        </div>
</asp:Content>
